(function(){"use strict";function t(t,n){for(var r=0,e=t.length;e>r;r++)if(t[r]===n)return r;return-1}function n(t){var n=t._promiseCallbacks;return n||(n=t._promiseCallbacks={}),n}function r(t,n){return"onerror"===t?void J.on("error",n):2!==arguments.length?J[t]:void(J[t]=n)}function e(t){return"function"==typeof t||"object"==typeof t&&null!==t}function o(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function u(){}function s(t){try{return t.then}catch(n){return on.error=n,on}}function a(t,n,r,e){try{t.call(n,r,e)}catch(o){return o}}function c(t,n,r){J.async(function(t){var e=!1,o=a(r,n,function(r){e||(e=!0,n!==r?h(t,r):_(t,r))},function(n){e||(e=!0,v(t,n))},"Settle: "+(t._label||" unknown promise"));!e&&o&&(e=!0,v(t,o))},t)}function f(t,n){n._state===rn?_(t,n._result):t._state===en?v(t,n._result):d(n,void 0,function(r){n!==r?h(t,r):_(t,r)},function(n){v(t,n)})}function l(t,n){if(n.constructor===t.constructor)f(t,n);else{var r=s(n);r===on?v(t,on.error):void 0===r?_(t,n):o(r)?c(t,n,r):_(t,n)}}function h(t,n){t===n?_(t,n):e(n)?l(t,n):_(t,n)}function p(t){t._onerror&&t._onerror(t._result),y(t)}function _(t,n){t._state===nn&&(t._result=n,t._state=rn,0===t._subscribers.length?J.instrument&&tn("fulfilled",t):J.async(y,t))}function v(t,n){t._state===nn&&(t._state=en,t._result=n,J.async(p,t))}function d(t,n,r,e){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=n,o[i+rn]=r,o[i+en]=e,0===i&&t._state&&J.async(y,t)}function y(t){var n=t._subscribers,r=t._state;if(J.instrument&&tn(r===rn?"fulfilled":"rejected",t),0!==n.length){for(var e,o,i=t._result,u=0;u<n.length;u+=3)e=n[u],o=n[u+r],e?w(r,e,o,i):o(i);t._subscribers.length=0}}function m(){this.error=null}function g(t,n){try{return t(n)}catch(r){return un.error=r,un}}function w(t,n,r,e){var i,u,s,a,c=o(r);if(c){if(i=g(r,e),i===un?(a=!0,u=i.error,i=null):s=!0,n===i)return void v(n,new TypeError("A promises callback cannot return that same promise."))}else i=e,s=!0;n._state!==nn||(c&&s?h(n,i):a?v(n,u):t===rn?_(n,i):t===en&&v(n,i))}function b(t,n){try{n(function(n){h(t,n)},function(n){v(t,n)})}catch(r){v(t,r)}}function A(t,n,r){return t===rn?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}function E(t,n,r,e){this._instanceConstructor=t,this.promise=new t(u,e),this._abortOnReject=r,this._validateInput(n)?(this._input=n,this.length=n.length,this._remaining=n.length,this._init(),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&_(this.promise,this._result))):v(this.promise,this._validationError())}function j(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function T(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function S(t,n){this._id=pn++,this._label=n,this._subscribers=[],J.instrument&&tn("created",this),u!==t&&(o(t)||j(),this instanceof S||T(),b(this,t))}function C(){this.value=void 0}function k(t){try{return t.then}catch(n){return vn.value=n,vn}}function O(t,n,r){try{t.apply(n,r)}catch(e){return vn.value=e,vn}}function R(t,n){for(var r,e,o={},i=t.length,u=new Array(i),s=0;i>s;s++)u[s]=t[s];for(e=0;e<n.length;e++)r=n[e],o[r]=u[e+1];return o}function M(t){for(var n=t.length,r=new Array(n-1),e=1;n>e;e++)r[e-1]=t[e];return r}function I(t,n,r){return{then:function(){return t.apply(n,r)}}}function P(t,n,r,e){var o=O(r,e,n);return o===vn&&v(t,o.value),t}function N(t,n,r,e){return _n.all(n).then(function(n){var o=O(r,e,n);return o===vn&&v(t,o.value),t})}function x(t){return t&&"object"==typeof t?t.constructor===_n?!0:k(t):!1}function K(t,n,r){this._superConstructor(t,n,!1,r)}function Y(t,n,r){this._superConstructor(t,n,!0,r)}function D(t,n,r){this._superConstructor(t,n,!1,r)}function U(){return function(){process.nextTick(W)}}function F(){var t=0,n=new Nn(W),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function G(){var t=new MessageChannel;return t.port1.onmessage=W,function(){t.port2.postMessage(0)}}function V(){return function(){setTimeout(W,1)}}function W(){for(var t=0;Mn>t;t+=2){var n=Kn[t],r=Kn[t+1];n(r),Kn[t]=void 0,Kn[t+1]=void 0}Mn=0}function q(t,n){J.async(t,n)}function z(){J.on.apply(J,arguments)}function B(){J.off.apply(J,arguments)}var H={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(r,e){var o,i=n(this);o=i[r],o||(o=i[r]=[]),-1===t(o,e)&&o.push(e)},off:function(r,e){var o,i,u=n(this);return e?(o=u[r],i=t(o,e),void(-1!==i&&o.splice(i,1))):void(u[r]=[])},trigger:function(t,r){var e,o,i=n(this);if(e=i[t])for(var u=0;u<e.length;u++)(o=e[u])(r)}},J={instrument:!1};H.mixin(J);var L;L=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var Q=L,X=Date.now||function(){return(new Date).getTime()},Z=Object.create||function(t){var n=function(){};return n.prototype=t,n},$=[],tn=function(t,n,r){1===$.push({name:t,payload:{guid:n._guidKey+n._id,eventName:t,detail:n._result,childGuid:r&&n._guidKey+r._id,label:n._label,timeStamp:X(),stack:new Error(n._label).stack}})&&setTimeout(function(){for(var t,n=0;n<$.length;n++)t=$[n],J.trigger(t.name,t.payload);$.length=0},50)},nn=void 0,rn=1,en=2,on=new m,un=new m;E.prototype._validateInput=function(t){return Q(t)},E.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},E.prototype._init=function(){this._result=new Array(this.length)};var sn=E;E.prototype._enumerate=function(){for(var t=this.length,n=this.promise,r=this._input,e=0;n._state===nn&&t>e;e++)this._eachEntry(r[e],e)},E.prototype._eachEntry=function(t,n){var r=this._instanceConstructor;i(t)?t.constructor===r&&t._state!==nn?(t._onerror=null,this._settledAt(t._state,n,t._result)):this._willSettleAt(r.resolve(t),n):(this._remaining--,this._result[n]=this._makeResult(rn,n,t))},E.prototype._settledAt=function(t,n,r){var e=this.promise;e._state===nn&&(this._remaining--,this._abortOnReject&&t===en?v(e,r):this._result[n]=this._makeResult(t,n,r)),0===this._remaining&&_(e,this._result)},E.prototype._makeResult=function(t,n,r){return r},E.prototype._willSettleAt=function(t,n){var r=this;d(t,void 0,function(t){r._settledAt(rn,n,t)},function(t){r._settledAt(en,n,t)})};var an=function(t,n){return new sn(this,t,!0,n).promise},cn=function(t,n){function r(t){h(i,t)}function e(t){v(i,t)}var o=this,i=new o(u,n);if(!Q(t))return v(i,new TypeError("You must pass an array to race.")),i;for(var s=t.length,a=0;i._state===nn&&s>a;a++)d(o.resolve(t[a]),void 0,r,e);return i},fn=function(t,n){var r=this;if(t&&"object"==typeof t&&t.constructor===r)return t;var e=new r(u,n);return h(e,t),e},ln=function(t,n){var r=this,e=new r(u,n);return v(e,t),e},hn="rsvp_"+X()+"-",pn=0,_n=S;S.cast=fn,S.all=an,S.race=cn,S.resolve=fn,S.reject=ln,S.prototype={constructor:S,_id:void 0,_guidKey:hn,_label:void 0,_state:void 0,_result:void 0,_subscribers:void 0,_onerror:function(t){J.trigger("error",t)},then:function(t,n,r){var e=this,o=e._state;if(o===rn&&!t||o===en&&!n)return J.instrument&&tn("chained",this,this),this;e._onerror=null;var i=new this.constructor(u,r),s=e._result;if(J.instrument&&tn("chained",e,i),o){var a=arguments[o-1];J.async(function(){w(o,i,a,s)})}else d(e,i,t,n);return i},"catch":function(t,n){return this.then(null,t,n)},"finally":function(t,n){var r=this.constructor;return this.then(function(n){return r.resolve(t()).then(function(){return n})},function(n){return r.resolve(t()).then(function(){throw n})},n)}};var vn=new C,dn=new C,yn=function(t,n){var r=function(){for(var r,e=this,o=arguments.length,i=new Array(o+1),s=!1,a=0;o>a;++a){if(r=arguments[a],!s){if(s=x(r),s===dn){var c=new _n(u);return v(c,dn.value),c}s&&r.constructor!==_n&&(r=I(s,arguments))}i[a]=r}var f=new _n(u);return i[o]=function(t,r){t?v(f,t):void 0===n?h(f,r):n===!0?h(f,M(arguments)):Q(n)?h(f,R(arguments,n)):h(f,r)},s?N(f,i,t,e):P(f,i,t,e)};return r.__proto__=t,r},mn=function(t,n){return _n.all(t,n)};K.prototype=Z(sn.prototype),K.prototype._superConstructor=sn,K.prototype._makeResult=A,K.prototype._validationError=function(){return new Error("allSettled must be called with an array")};var gn=function(t,n){return new K(_n,t,n).promise},wn=function(t,n){return _n.race(t,n)},bn=Y;Y.prototype=Z(sn.prototype),Y.prototype._superConstructor=sn,Y.prototype._init=function(){this._result={}},Y.prototype._validateInput=function(t){return t&&"object"==typeof t},Y.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},Y.prototype._enumerate=function(){var t=this.promise,n=this._input,r=[];for(var e in n)t._state===nn&&n.hasOwnProperty(e)&&r.push({position:e,entry:n[e]});var o=r.length;this._remaining=o;for(var i,u=0;t._state===nn&&o>u;u++)i=r[u],this._eachEntry(i.entry,i.position)};var An=function(t,n){return new bn(_n,t,n).promise};D.prototype=Z(bn.prototype),D.prototype._superConstructor=sn,D.prototype._makeResult=A,D.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var En,jn=function(t,n){return new D(_n,t,n).promise},Tn=function(t){throw setTimeout(function(){throw t}),t},Sn=function(t){var n={};return n.promise=new _n(function(t,r){n.resolve=t,n.reject=r},t),n},Cn=function(t,n,r){return _n.all(t,r).then(function(t){if(!o(n))throw new TypeError("You must pass a function as map's second argument.");for(var e=t.length,i=new Array(e),u=0;e>u;u++)i[u]=n(t[u]);return _n.all(i,r)})},kn=function(t,n){return _n.resolve(t,n)},On=function(t,n){return _n.reject(t,n)},Rn=function(t,n,r){return _n.all(t,r).then(function(t){if(!o(n))throw new TypeError("You must pass a function as filter's second argument.");for(var e=t.length,i=new Array(e),u=0;e>u;u++)i[u]=n(t[u]);return _n.all(i,r).then(function(n){for(var r=new Array(e),o=0,i=0;e>i;i++)n[i]&&(r[o]=t[i],o++);return r.length=o,r})})},Mn=0,In=function(t,n){Kn[Mn]=t,Kn[Mn+1]=n,Mn+=2,2===Mn&&En()},Pn="undefined"!=typeof window?window:{},Nn=Pn.MutationObserver||Pn.WebKitMutationObserver,xn="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Kn=new Array(1e3);En="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?U():Nn?F():xn?G():V(),J.async=In;if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var Yn=window.__PROMISE_INSTRUMENTATION__;r("instrument",!0);for(var Dn in Yn)Yn.hasOwnProperty(Dn)&&z(Dn,Yn[Dn])}var Un={race:wn,Promise:_n,allSettled:gn,hash:An,hashSettled:jn,denodeify:yn,on:z,off:B,map:Cn,filter:Rn,resolve:kn,reject:On,all:mn,rethrow:Tn,defer:Sn,EventTarget:H,configure:r,async:q};"function"==typeof define&&define.amd?define(function(){return Un}):"undefined"!=typeof module&&module.exports?module.exports=Un:"undefined"!=typeof this&&(this.RSVP=Un)}).call(this);